# Тестовий план для системи обліку книг

## Аналіз системи та ідентифікація потенційних точок відмови при високому навантаженні

### Потенційні точки відмови:

**1. База даних**
- **Точка відмови**: Велика кількість одночасних запитів до бази даних (наприклад, одночасна реєстрація нових книг, оновлення статусів книг або бронювання кількома користувачами) може спричинити вузькі місця у транзакціях.
- **Умови відмови**:
  - Блокування транзакцій через одночасний доступ до тих самих записів.
  - Вичерпання пулу підключень до бази даних.
  - Тайм-аути через перевантаження бази даних.
- **Наслідки**: Затримки або нездатність зберегти дані, невдалі спроби комітів або зависання системи.

**2. Система транзакцій**
- **Точка відмови**: Високий обсяг одночасних операцій, таких як зміна статусу книг або реєстрація бронювань, може викликати колізії транзакцій або перевантаження черги запитів.
- **Умови відмови**:
  - Неправильне завершення транзакцій.
  - Невдалі транзакції через перевантаження бази даних.
- **Наслідки**: Невірне оновлення інформації про книги або невдалі операції бронювання.

**3. Зовнішні API**
- **Точка відмови**: При запитах до зовнішніх API (наприклад, для перевірки наявності книг у партнерських бібліотеках) можливі проблеми з доступністю або перевищення лімітів запитів.
- **Умови відмови**:
  - Перевищення лімітів запитів.
  - Довгий час відповіді через перевантаження API.
- **Наслідки**: Неможливість отримати оновлену інформацію про книги, що вплине на бронювання та обробку запитів.

**4. Пул підключень та HTTP-запити**
- **Точка відмови**: Висока кількість одночасних запитів до бази даних або зовнішніх API.
- **Умови відмови**:
  - Вичерпання кількості одночасних підключень.
- **Наслідки**: Затримки у виконанні запитів, зависання системи або неможливість обробки нових запитів.

## План тестування системи при навантаженні

### 1. Тестування навантаженням
- **Мета**: Перевірити стабільність системи при одночасному використанні багатьма користувачами.
- **Тест**:
  - Використати Apache JMeter або Locust для симуляції одночасних запитів (наприклад, оновлення статусу книг, бронювання).
  - Створити сценарії, де користувачі одночасно бронюють та повертають книги.
- **Очікуваний результат**: Система повинна витримати певну кількість одночасних запитів без значного зниження продуктивності.

### 2. Стрес-тестування
- **Мета**: Визначити межі системи під екстремальними умовами.
- **Тест**:
  - Поступово збільшувати кількість одночасних запитів до бази даних, доки не почнуть з’являтися відмови.
  - Імітувати надзвичайно високий обсяг запитів до системи.
- **Очікуваний результат**: Виявити поріг відмов системи, при якому починаються затримки або повний збій.

### 3. Тестування пулу підключень
- **Мета**: Перевірити, як система управляє пулом підключень при високому навантаженні.
- **Тест**:
  - Запустити навантаження, яке включає багато одночасних запитів до бази даних та API.
  - Виміряти, як система обробляє пул підключень і чи виникають затримки.
- **Очікуваний результат**: Система повинна ефективно керувати пулом підключень без відмов.

### 4. Тестування відмов зовнішніх API
- **Мета**: Перевірити стійкість системи в разі недоступності або затримки зовнішніх API.
- **Тест**:
  - Імітувати недоступність API або затримки в їхній роботі.
  - Перевірити, як система реагує: чи інформує користувача про помилку або виконує відкати.
- **Очікуваний результат**: Система повинна коректно обробляти відмови, використовуючи кешовані дані або повідомляючи користувача.

## Документація протоколів тестів

| Тест                         | Опис                                 | Очікуваний результат                             | Результат           |
|------------------------------|--------------------------------------|-------------------------------------------------|---------------------|
| Тест навантаження для книг   | Одночасне бронювання 100 книг       | Система обробляє запити без затримок            | Успіх / Відмова     |
| Стрес-тест для бази даних    | Збільшення кількості запитів до 500 | Час обробки запитів не перевищує 2 с            | Успіх / Відмова     |
| Відмова зовнішніх API        | Імітувати недоступність API         | Система повідомляє користувача про помилку      | Успіх / Відмова     |

## Пояснення рішень
- Якщо система не може обробити запити за встановлений час, слід оптимізувати використання бази даних та пулу підключень.
- У разі відмов зовнішніх API, система повинна або використовувати кешовані дані, або повідомляти користувача про тимчасову недоступність сервісу.

## Висновок
Дотримання цього тестового плану дозволить оцінити стабільність і продуктивність системи обліку книг при високих навантаженнях, а також забезпечити надійну роботу для користувачів. Тестування виявить потенційні слабкі місця, дозволяючи підвищити стійкість системи.

